(function(n,t){typeof module!="undefined"&&module.exports?module.exports=t(require("angular")):typeof define=="function"&&define.amd?define(["angular"],t):t(n.angular)})(this,function(n){"use strict";var f=n.module("ngDialog",[]),i=n.element,r=n.isDefined,u=(document.body||document.documentElement).style,s=r(u.animation)||r(u.WebkitAnimation)||r(u.MozAnimation)||r(u.MsAnimation)||r(u.OAnimation),e="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",o=!1,t;return f.provider("ngDialog",function(){var c=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0};this.setForceBodyReload=function(n){o=n||!1};this.setDefaults=function(t){n.extend(c,t)};var u=0,r=0,f,h={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller",function(l,a,v,y,p,w,b,k,d){var g=l.find("body"),nt,tt;return o&&w.$on("$locationChangeSuccess",function(){g=l.find("body")}),nt={onDocumentKeydown:function(n){n.keyCode===27&&tt.close("$escape")},setBodyPadding:function(n){var t=parseInt(g.css("padding-right")||0,10);g.css("padding-right",t+n+"px");g.data("ng-dialog-original-padding",t)},resetBodyPadding:function(){var n=g.data("ng-dialog-original-padding");n?g.css("padding-right",n+"px"):g.css("padding-right","")},performCloseDialog:function(n,i){var u=n.attr("id"),o;typeof k.Hammer!="undefined"?(o=t.hammerTime,o.off("tap",f),o.destroy&&o.destroy(),delete t.hammerTime):n.unbind("click");r===1&&g.unbind("keydown");n.hasClass("ngdialog-closing")||(r-=1);w.$broadcast("ngDialog.closing",n);r=r<0?0:r;s?(t.$destroy(),n.unbind(e).bind(e,function(){n.remove();r===0&&(g.removeClass("ngdialog-open"),nt.resetBodyPadding());w.$broadcast("ngDialog.closed",n)}).addClass("ngdialog-closing")):(t.$destroy(),n.remove(),r===0&&(g.removeClass("ngdialog-open"),nt.resetBodyPadding()),w.$broadcast("ngDialog.closed",n));h[u]&&(h[u].resolve({id:u,value:i,$dialog:n,remainingDialogs:r}),delete h[u])},closeDialog:function(t,i){var u=t.data("$ngDialogPreCloseCallback"),r;u&&n.isFunction(u)?(r=u.call(t,i),n.isObject(r)?r.closePromise?r.closePromise.then(function(){nt.performCloseDialog(t,i)}):r.then(function(){nt.performCloseDialog(t,i)},function(){return}):r&&nt.performCloseDialog(t,i)):nt.performCloseDialog(t,i)}},tt={open:function(e){function ut(n,t){return p.get(n,t||{}).then(function(n){return n.data||""})}function ft(t){return t?n.isString(t)&&o.plain?t:typeof o.cache=="boolean"&&!o.cache?ut(t,{cache:!1}):a.get(t)||ut(t,{cache:!0}):"Empty template"}var l=this,o=n.copy(c),rt,s,it;return e=e||{},n.extend(o,e),u+=1,l.latestID="ngdialog"+u,h[l.latestID]=rt=y.defer(),t=n.isObject(o.scope)?o.scope.$new():w.$new(),y.when(ft(o.template||o.templateUrl)).then(function(e){var c,y,h,p;if(a.put(o.template||o.templateUrl,e),o.showClose&&(e+='<div class="ngdialog-close"><\/div>'),l.$result=s=i('<div id="ngdialog'+u+'" class="ngdialog"><\/div>'),s.html(o.overlay?'<div class="ngdialog-overlay"><\/div><div class="ngdialog-content">'+e+"<\/div>":'<div class="ngdialog-content">'+e+"<\/div>"),o.data&&n.isString(o.data)?(c=o.data.replace(/^\s*/,"")[0],t.ngDialogData=c==="{"||c==="["?n.fromJson(o.data):o.data):o.data&&n.isObject(o.data)&&(t.ngDialogData=o.data),o.controller&&(n.isString(o.controller)||n.isArray(o.controller)||n.isFunction(o.controller))&&(y=d(o.controller,{$scope:t,$element:s}),s.data("$ngDialogControllerController",y)),o.className&&s.addClass(o.className),it=o.appendTo&&n.isString(o.appendTo)?n.element(document.querySelector(o.appendTo)):g,o.preCloseCallback&&(n.isFunction(o.preCloseCallback)?h=o.preCloseCallback:n.isString(o.preCloseCallback)&&t&&(n.isFunction(t[o.preCloseCallback])?h=t[o.preCloseCallback]:t.$parent&&n.isFunction(t.$parent[o.preCloseCallback])?h=t.$parent[o.preCloseCallback]:w&&n.isFunction(w[o.preCloseCallback])&&(h=w[o.preCloseCallback])),h&&s.data("$ngDialogPreCloseCallback",h)),t.closeThisDialog=function(n){nt.closeDialog(s,n)},b(function(){var i,n;v(s)(t);i=k.innerWidth-g.prop("clientWidth");g.addClass("ngdialog-open");n=i-(k.innerWidth-g.prop("clientWidth"));n>0&&nt.setBodyPadding(n);it.append(s);o.name?w.$broadcast("ngDialog.opened",{dialog:s,name:o.name}):w.$broadcast("ngDialog.opened",s)}),o.closeByEscape&&g.bind("keydown",nt.onDocumentKeydown),o.closeByNavigation&&w.$on("$locationChangeSuccess",function(){nt.closeDialog(s)}),f=function(n){var r=o.closeByDocument?i(n.target).hasClass("ngdialog-overlay"):!1,t=i(n.target).hasClass("ngdialog-close");(r||t)&&tt.close(s.attr("id"),t?"$closeButton":"$document")},typeof k.Hammer!="undefined"){p=t.hammerTime=k.Hammer(s[0]);p.on("tap",f)}else s.bind("click",f);return r+=1,tt}),{id:"ngdialog"+u,closePromise:rt.promise,close:function(n){nt.closeDialog(s,n)}}},openConfirm:function(t){var u=y.defer(),r={closeByEscape:!1,closeByDocument:!1},f;return n.extend(r,t),r.scope=n.isObject(r.scope)?r.scope.$new():w.$new(),r.scope.confirm=function(n){u.resolve(n);var t=i(document.getElementById(f.id));nt.performCloseDialog(t,n)},f=tt.open(r),f.closePromise.then(function(n){return n?u.reject(n.value):u.reject()}),u.promise},close:function(n,t){var r=i(document.getElementById(n));return r.length?nt.closeDialog(r,t):tt.closeAll(t),tt},closeAll:function(t){var r=document.querySelectorAll(".ngdialog");n.forEach(r,function(n){nt.closeDialog(i(n),t)})},getDefaults:function(){return c}},tt}]}),f.directive("ngDialog",["ngDialog",function(t){return{restrict:"A",scope:{ngDialogScope:"="},link:function(i,r,u){r.on("click",function(r){var e,f;r.preventDefault();e=n.isDefined(i.ngDialogScope)?i.ngDialogScope:"noScope";n.isDefined(u.ngDialogClosePrevious)&&t.close(u.ngDialogClosePrevious);f=t.getDefaults();t.open({template:u.ngDialog,className:u.ngDialogClass||f.className,controller:u.ngDialogController,scope:e,data:u.ngDialogData,showClose:u.ngDialogShowClose==="false"?!1:u.ngDialogShowClose==="true"?!0:f.showClose,closeByDocument:u.ngDialogCloseByDocument==="false"?!1:u.ngDialogCloseByDocument==="true"?!0:f.closeByDocument,closeByEscape:u.ngDialogCloseByEscape==="false"?!1:u.ngDialogCloseByEscape==="true"?!0:f.closeByEscape,preCloseCallback:u.ngDialogPreCloseCallback||f.preCloseCallback})})}}}]),f});
//# sourceMappingURL=ngDialog.min.js.map
